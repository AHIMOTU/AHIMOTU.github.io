<html data-theme="valentine">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover"/>
    <link href="https://cdn.bootcdn.net/ajax/libs/daisyui/3.5.1/full.min.css" rel="stylesheet" type="text/css"/>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      [data-theme=valentine] {
        color-scheme: light;
        --pf: 353 74% 60%;
        --sf: 254 86% 70%;
        --af: 181 56% 63%;
        --nf: 336 43% 41%;
        --b2: 318 46% 82%;
        --b3: 318 46% 75%;
        --pc: 356 26% 14%;
        --sc: 256 20% 15%;
        --ac: 181 16% 15%;
        --inc: 239 85% 93%;
        --suc: 126 38% 89%;
        --wac: 29 59% 11%;
        --erc: 11 100% 91%;
        --rounded-box: 1rem;
        --rounded-badge: 1.9rem;
        --animation-btn: .25s;
        --animation-input: .2s;
        --btn-text-case: uppercase;
        --btn-focus-scale: .95;
        --border-btn: 1px;
        --tab-border: 1px;
        --tab-radius: .5rem;
        --p: 353 74% 67%;
        --s: 254 86% 77%;
        --a: 181 56% 70%;
        --n: 336 43% 48%;
        --nc: 318 46% 89%;
        --b1: 318 46% 89%;
        --bc: 344 38% 28%;
        --in: 221 83% 53%;
        --su: 142 76% 36%;
        --wa: 32 95% 44%;
        --er: 0 72% 51%;
        --rounded-btn: 1.9rem
      }
      [v-cloak] {
        display: none;
      }
    </style>
</head>
<body>

<div id="app" class="bg-base-100">
    <div v-if="isLove && visible" v-cloak>
        <div class="flex flex-col items-center py-4">
            <span class="pr-4 font-mono text-4xl">ç›¸è¯†</span>
            <div class="grid grid-flow-col gap-5 text-center auto-cols-max pt-2">
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedKnowTimeData.days }}</span>
                    <span>days</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedKnowTimeData.hours }}</span>
                    <span>hours</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedKnowTimeData.minutes }}</span>
                    <span>min</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedKnowTimeData.seconds }}</span>
                    <span>sec</span>
                </div>
            </div>
        </div>
        <div class="flex flex-col items-center py-4">
            <span class="pr-4 font-mono text-4xl">ç›¸è§</span>
            <div class="grid grid-flow-col gap-5 text-center auto-cols-max pt-2">
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedMeetTimeData.days }}</span>
                    <span>days</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedMeetTimeData.hours }}</span>
                    <span>hours</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedMeetTimeData.minutes }}</span>
                    <span>min</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedMeetTimeData.seconds }}</span>
                    <span>sec</span>
                </div>
            </div>
        </div>
        <div v-if="isLove" class="flex flex-col items-center py-4">
            <span class="pr-4 font-mono text-4xl" @click="visible = false">ç›¸æ‹</span>
            <div class="grid grid-flow-col gap-5 text-center auto-cols-max pt-2">
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedLoveTimeData.days }}</span>
                    <span>days</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedLoveTimeData.hours }}</span>
                    <span>hours</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedLoveTimeData.minutes }}</span>
                    <span>min</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ passedLoveTimeData.seconds }}</span>
                    <span>sec</span>
                </div>
            </div>
        </div>
        <div class="flex flex-col items-center py-4">
            <span class="pr-4 font-mono text-4xl">ä¸‹æ¬¡ç›¸è§</span>
            <div class="grid grid-flow-col gap-5 text-center auto-cols-max pt-2">
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ nextMeetTimeData.days }}</span>
                    <span>days</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ nextMeetTimeData.hours }}</span>
                    <span>hours</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ nextMeetTimeData.minutes }}</span>
                    <span>min</span>
                </div>
                <div class="flex flex-col p-2 bg-neutral rounded-box text-neutral-content">
                    <span class="font-mono text-3xl">{{ nextMeetTimeData.seconds }}</span>
                    <span>sec</span>
                </div>
            </div>
        </div>
        <!-- Open the modal using ID.showModal() method -->
        <div v-if="showBtn" class="flex flex-col items-center py-4">
            <button class="btn" onclick="my_modal_1.showModal()">æƒ³å¯¹ä½ è¯´</button>
        </div>
        <dialog id="my_modal_1" class="modal">
            <form method="dialog" class="modal-box">
                <!--<h3 class="font-bold text-lg">MYåª›å®</h3>-->
                <!--<p class="py-4">ä¸ƒå¤•å¿«ä¹ï¼Œè¦æ°¸è¿œå¼€å¿ƒå“Ÿï¼<br />æ— è®ºå‘ç”Ÿä»€ä¹ˆäº‹ï¼Œæˆ‘éƒ½åœ¨ä½ èº«è¾¹ï¼</p>-->
                <!--<div class="modal-action">-->
                <!--    <button class="btn">æ¹˜å­</button>-->
                <!--</div>-->
                <h3 class="font-bold text-lg">å¼ è€å¸ˆ</h3>
                <p class="py-4">æ•™å¸ˆèŠ‚å¿«ä¹ï¼æ„¿ä½ å¼€å¿ƒå·¥ä½œæ¯ä¸€å¤©ï¼<br />PS: æˆ‘çš„åª›å®è¾›è‹¦å•¦ï¼å¸Œæœ›ä½ èƒ½æ—©ç‚¹å½“ä¸Šé¢†å¯¼ä¸å†è¢«æ¬ºè´ŸğŸ˜</p>
                <div class="modal-action">
                    <button class="btn">å¼ åŒå­¦</button>
                </div>
            </form>
        </dialog>
    </div>
    <div v-else v-cloak class="letter p-2">
        <p class="pb-2">æˆ‘ä»¬çš„æ•…äº‹ä»2023å¹´6æœˆ4å·å¼€å§‹</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„ä¼˜é›…</p>
        <p>ç¬¬ä¸€æ¬¡è§é¢æ—¶çš„ç™½è‰²é•¿è£™è®©æˆ‘å°è±¡æ·±åˆ»</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„æ¸©æŸ”</p>
        <p>å’Œä½ è¯´è¯æ€»æ˜¯æ„Ÿåˆ°å¾ˆèˆ’æœ</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„ä¹è§‚</p>
        <p>æ— è®ºé‡åˆ°ä»€ä¹ˆäº‹éƒ½æ˜¯å¼€å¿ƒé¢å¯¹</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„è‡ªä¿¡</p>
        <p>ä¸äººäº¤è°ˆæ€»æ˜¯æ— è¯ä¸è¯´</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„ä¸Šè¿›</p>
        <p>ä»é«˜ä¸­åˆ°å¤§å­¦åˆ°å·¥ä½œéƒ½æ˜¯è¿™æ ·</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„ç‹¬ç«‹</p>
        <p>åœ¨å¤§å­¦å°±åšè¿‡é‚£ä¹ˆå¤šçš„å…¼èŒ</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„æ‰§ç€</p>
        <p>ä¸ºäº†è§£å‡ºå…«çš‡åæ¸¸æˆå¯ä»¥æŠ•å…¥å‡ ä¸ªå°æ—¶</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„ä¼˜ç§€</p>
        <p>ä½ æ˜¯é‚£ä¹ˆçš„å¯çˆ±</p>
        <p>......</p>
        <p>å’Œä½ ç›¸å¤„çš„è¶Šä¹… æˆ‘è¶Šè§‰å¾—æˆ‘é‡åˆ°å–œæ¬¢çš„äººäº†</p>
        <p>æˆ‘ä¸å¤ªæ“…é•¿è¡¨è¾¾ ä½†å°±åƒæˆ‘ä¸€ç›´å¯¹ä½ è¯´çš„</p>
        <p>æˆ‘ä¼šç”¨çœŸå¿ƒç”¨è¡ŒåŠ¨æ¥è¯æ˜æˆ‘å¯¹ä½ çš„å–œæ¬¢</p>
        <p>æˆ‘æ„¿æ„</p>
        <p>é™ªä½ ä¸€èµ·æŠ“å¨ƒå¨ƒ</p>
        <p>é™ªä½ å®Œæˆ66ä¸ªå¿ƒæ„¿</p>
        <p>é™ªä½ å»ä½ æƒ³å»çš„åœ°æ–¹æ—…æ¸¸</p>
        <p>é™ªä½ è¿‡ä½ æƒ³è¿‡çš„æ‰€æœ‰èŠ‚æ—¥</p>
        <p>é™ªä½ åšä¸€åˆ‡ä½ å–œæ¬¢çš„äº‹</p>
        <p class="pt-2">åœ¨æˆ‘ä»¬ç›¸è¯†çš„{{ passedKnowTimeData.days }}å¤© ç›¸è§çš„{{ passedMeetTimeData.days }}å¤©é‡Œ</p>
        <p>æˆ‘ä»¬å·²ç»ä»é™Œç”Ÿäººåˆ°ç†Ÿäººåˆ°æ™®é€šæœ‹å‹å†åˆ°æ— è¯ä¸è°ˆçš„æœ‹å‹</p>
        <p>æ­¤æ—¶æ­¤åˆ»æˆ‘æƒ³å¯¹ä½ è¯´</p>
        <div class="py-5 text-center">
            <button v-if="!isLove" class="btn" @click="onClick">
                åšæˆ‘å¥³æœ‹å‹å§
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
            </button>
            <button v-else class="btn" @click="visible = true">
                ä½ è¿˜æ˜¯æˆ‘çš„å¥³æœ‹å‹
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
            </button>
        </div>
    </div>
</div>

<script src="https://cdn.bootcdn.net/ajax/libs/vue/3.2.47/vue.global.min.js"></script>
<script>
  if (location.search.includes('debugger')) {
    localStorage.clear();
  }

  const { createApp, ref, onMounted } = Vue

  //
  const knowTime = new Date('2023-06-04 12:45:21').getTime();
  const meetTime = new Date('2023-06-22 18:11:25').getTime();
  let loveTime = new Date('2023-08-13 23:53:46').getTime();
  const nextMeetTime = new Date('2024-02-01').getTime();

  const SECOND = 1000;
  const MINUTE = 60 * SECOND;
  const HOUR = 60 * MINUTE;
  const DAY = 24 * HOUR;

  function parseTimeData(time) {
    const days = Math.floor(time / DAY);
    const hours = Math.floor((time % DAY) / HOUR);
    const minutes = Math.floor((time % HOUR) / MINUTE);
    const seconds = Math.floor((time % MINUTE) / SECOND);
    const milliseconds = Math.floor(time % SECOND);

    return {
      days: padZero(days),
      hours: padZero(hours),
      minutes: padZero(minutes),
      seconds: padZero(seconds),
      milliseconds,
    };
  }

  function padZero(num, targetLength = 2) {
    let str = num + '';

    while (str.length < targetLength) {
      str = '0' + str;
    }

    return str;
  }

  createApp({
    setup() {
      const isLove = ref(!!loveTime)
      const visible = ref(true)
      const passedKnowTimeData = ref({
        days: 0,
        hours: 0,
        minutes: 0,
        seconds: 0,
      })
      const passedMeetTimeData = ref({
        days: 0,
        hours: 0,
        minutes: 0,
        seconds: 0,
      })
      const passedLoveTimeData = ref({
        days: 0,
        hours: 0,
        minutes: 0,
        seconds: 0,
      })
      const nextMeetTimeData = ref({
        days: 0,
        hours: 0,
        minutes: 0,
        seconds: 0,
      })
      onMounted(() => {
        count();
      })

      function count() {
        setTimeout(() => {
          passedKnowTimeData.value = parseTimeData(Date.now() - knowTime)
          passedMeetTimeData.value = parseTimeData(Date.now() - meetTime)
          if (loveTime) {
            passedLoveTimeData.value = parseTimeData(Date.now() - loveTime)
          }
          nextMeetTimeData.value = parseTimeData(nextMeetTime - Date.now())
          count();
        }, 1000)
      }

      function onClick() {
        loveTime = Date.now();
        isLove.value = true;
        localStorage.setItem('love-time', Date.now() + '');
      }

      // const showBtn = ref(new Date().setHours(0, 0, 0, 0) === new Date('2023/8/22').getTime())
      const showBtn = ref(new Date().setHours(0, 0, 0, 0) === new Date('2023/9/10').getTime())

      return {
        visible,
        isLove,
        passedKnowTimeData,
        passedMeetTimeData,
        passedLoveTimeData,
        nextMeetTimeData,
        showBtn,
        onClick,
      }
    }
  }).mount('#app')
</script>
</body>
</html>
